<form
  class="flex flex-col gap-3 max-h-[85.7vh] overflow-visible"
  #form="ngForm"
  (ngSubmit)="onSubmit()"
>
  <h1 class="text-2xl font-bold">{{ submitText }} Recipe</h1>
  <div class="grid">
    <label class="font-bold">Name <span class="text-red-600">*</span></label>
    <input
      ngModel
      type="text"
      class="input"
      name="name"
      required
      #name="ngModel"
    />
    <span *ngIf="!name.valid && name.touched" class="text-red-600 text-sm"
      >Name is required</span
    >
  </div>
  <div class="grid">
    <label class="font-bold"
      >Image URL <span class="text-red-600">*</span></label
    >
    <div class="flex gap-5 items-center">
      <input
        ngModel
        type="text"
        class="input flex-1 max-h-11"
        name="imagePath"
        #imagePath="ngModel"
        pattern="(https:)([/|.|\w|\s|-])*\.(?:jpg|gif|png)"
        required
      />
      <img
        *ngIf="imagePath.valid"
        class="image"
        [src]="imagePath.value"
        [alt]="imagePath.value"
      />
    </div>
    <span
      *ngIf="!imagePath.valid && imagePath.touched"
      class="text-red-600 text-sm"
      >Please enter a valid image path</span
    >
  </div>
  <div class="grid">
    <label class="font-bold">Description</label>
    <textarea ngModel type="text" class="input" name="description"></textarea>
  </div>
  <h3 class="font-bold text-2xl">Ingredients</h3>
  <hr class="border border-black" />
  <div class="flex gap-2 items-end">
    <div>
      <label class="grid font-bold">Name</label>
      <input #ingredientName type="text" class="input" name="ingredient" />
    </div>
    <div>
      <label class="grid font-bold">Amount</label>
      <input #ingredientAmount type="number" class="input" name="amount" />
    </div>
    <button
      type="button"
      (click)="onAddIngredient(ingredientName, ingredientAmount)"
      class="flex-1 button green"
    >
      +
    </button>
  </div>
  <div class="overflow-auto">
    <app-shopping-list
      [ingredients]="ingredients"
      [service]="onDeleteIngrient"
    ></app-shopping-list>
  </div>
  <button
    class="button info disabled:bg-blue-200 disabled:border-none disabled:shadow-none disabled:cursor-not-allowed"
    [disabled]="!form.valid"
  >
    {{ submitText | uppercase }}
  </button>
</form>
